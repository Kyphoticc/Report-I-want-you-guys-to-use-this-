package me.benzplayz.Main;

import java.util.concurrent.ConcurrentHashMap;
import org.bukkit.Server;
import org.bukkit.command.PluginCommand;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.player.PlayerQuitEvent;
import org.bukkit.plugin.PluginManager;
import org.bukkit.plugin.java.JavaPlugin;
import report.cooldown.CooldownManager;

public class Main
  extends JavaPlugin
  implements Listener
{
  public void onEnable()
  {
    saveDefaultConfig();
    
    getCommand("report").setExecutor(new Report());
    getServer().getPluginManager().registerEvents(this, this);
  }
  
  public void onDisable()
  {
    CooldownManager.getInstance().getMap().clear();
  }
  
  @EventHandler
  public void onPlayerLeave(PlayerQuitEvent e)
  {
    if (CooldownManager.getInstance().getCooldown(e.getPlayer(), "Report") != null) {
      CooldownManager.getInstance().removeCooldown(e.getPlayer(), "Report", true);
    }
  }
  
  public static Main getPlugin()
  {
    return (Main)JavaPlugin.getPlugin(Main.class);
  }
}
